<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carlisle Rainey">
<meta name="dcterms.date" content="2025-03-19">
<meta name="description" content="Kane (2025) makes several suggestions to help researchers make a compelling case for null results. These are also helpful action items to maximize statistical power.">

<title>Carlisle Rainey - Kane (2025) as a Power Paper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-F57WQLHH67"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-F57WQLHH67', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Carlisle Rainey - Kane (2025) as a Power Paper">
<meta property="og:description" content="Kane (2025) makes several suggestions to help researchers make a compelling case for null results. These are also helpful action items to maximize statistical power.">
<meta property="og:image" content="https://www.carlislerainey.com/blog/2025-03-19-kane-2025-as-a-power-paper/twitter-card.png">
<meta property="og:site-name" content="Carlisle Rainey">
<meta property="og:image:height" content="500">
<meta property="og:image:width" content="1000">
<meta name="twitter:title" content="Carlisle Rainey - Kane (2025) as a Power Paper">
<meta name="twitter:description" content="Kane (2025) makes several suggestions to help researchers make a compelling case for null results. These are also helpful action items to maximize statistical power.">
<meta name="twitter:image" content="https://www.carlislerainey.com/blog/2025-03-19-kane-2025-as-a-power-paper/twitter-card.png">
<meta name="twitter:creator" content="@carlislerainey">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="500">
<meta name="twitter:image-width" content="1000">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Carlisle Rainey</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research/index.html" rel="" target="">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/index.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talks/index.html" rel="" target="">
 <span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto tools-wide">
    <a href="../../blog/index.xml" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-rss"></i></a>
    <a href="https://twitter.com/carlislerainey" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://sciences.social/(CarlisleRainey?)" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-mastodon"></i></a>
    <a href="https://github.com/carlislerainey" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Kane (2025) as a Power Paper</h1>
<p class="subtitle lead">Re-Interpreting Kane’s (2025) Paper on Null Results as a Paper on Statistical Power</p>
  <div class="quarto-categories">
    <div class="quarto-category">statistical power</div>
    <div class="quarto-category">hypothesis tests</div>
    <div class="quarto-category">power analysis</div>
    <div class="quarto-category">methodology</div>
  </div>
  </div>

<div>
  <div class="description">
    Kane (2025) makes several suggestions to help researchers make a compelling case for null results. These are also helpful action items to maximize statistical power.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Carlisle Rainey </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 19, 2025</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="page-columns page-full"><p>It’s helpful to think of statistical power as determined by the ratio <span class="math inline">\(\frac{\tau}{SE}\)</span>, where <span class="math inline">\(\tau\)</span> is the treatment effect and SE is the standard error of the estimate.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;<span class="citation" data-cites="bloom1995">Bloom (<a href="#ref-bloom1995" role="doc-biblioref">1995</a>)</span> has a really beautiful paper on this idea. It’s one of my favorites. I also have a <a href="https://osf.io/preprints/osf/5am9q_v2">preprint</a> on the topic.</p></li></div></div>
<p><a href="https://www.carlislerainey.com/blog/2023-06-12-power-3-rule-of-364/">I like this ratio</a> because it makes two distinct tasks clear:</p>
<ol type="1">
<li>create a treatment with some oomph and</li>
<li>estimate it precisely.</li>
</ol>
<p>While pitched as a paper on null result, <span class="citation" data-cites="kane2025">Kane (<a href="#ref-kane2025" role="doc-biblioref">2025</a>)</span> offers a very helpful (and thorough!) list of ideas to increase statistical power.</p>
<section id="power-as-a-ratio" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="power-as-a-ratio">Power as a Ratio</h2>
<div class="page-columns page-full"><p>For a “well-powered experiment,” the task is to get the ratio <span class="math inline">\(\frac{\tau}{SE}\)</span> above at least 2.5 (for 80% power) and ideally to 3.3 (for 95% power).<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;Remember that “well-powered” isn’t a given. Most political science research is “greatly underpowered” <span class="citation" data-cites="arel-bundock2022">(<a href="#ref-arel-bundock2022" role="doc-biblioref">Arel-Bundock et al. 2022</a>)</span>.</p></li></div></div>
<p>Here’s <a href="https://osf.io/preprints/osf/5am9q_v2">the idea</a>:</p>
<blockquote class="blockquote">
<p>Power equals <span class="math inline">\(1 - \Phi_{std}\left( 1.64 - \frac{\tau}{SE} \right)\)</span>, where <span class="math inline">\(\Phi_{std}(z)\)</span> is the standard normal CDF (as found in a standard <span class="math inline">\(z\)</span> table), <span class="math inline">\(SE\)</span> is the standard error of the estimated treatment effect, and <span class="math inline">\(\tau\)</span> is the treatment effect.</p>
</blockquote>
<blockquote class="blockquote">
<p>This rule allows us to connect statistical power to the familiar <span class="math inline">\(z\)</span> table in the appendices of many statistics textbooks or the <code>pnorm()</code> function in R. But, more importantly, it drives home an important intuition—<strong>power is determined by the key ratio</strong> <span class="math inline">\(\frac{\tau}{SE}\)</span>. To estimate power, we must make an informed assumption about the effect of interest and a good prediction of standard error of the estimate. Further, when we consider changes to the experimental design and the consequences for statistical power, it can be helpful to think about the numerator or the denominator of the key ratio <span class="math inline">\(\frac{\tau}{SE}\)</span>: <strong>How do you make the effect as large as possible? And how do you make the estimate as precise as possible?</strong></p>
</blockquote>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Two Key Tasks
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Make the effect as large as possible.</li>
<li>Make the estimate as precise as possible.</li>
</ol>
</div>
</div>
</section>
<section id="kanes-list-and-relevance-to-the-ratio" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="kanes-list-and-relevance-to-the-ratio">Kane’s List, and Relevance to the Ratio</h2>
<p><span class="citation" data-cites="kane2025">Kane (<a href="#ref-kane2025" role="doc-biblioref">2025</a>)</span> offers an excellent list of options to either increase the treatment effect or shrink the standard error.</p>
<p>He pitches the list as a way to make a compelling case for null results. However, the list is also helpful for making sure that we’ve thought through the ways to maximize power. It’s a wonderful paper well worth a careful read for folks who run experiments or read experimental work.</p>
<p>I’m going to borrow his list and connect the action items to statistical power.</p>
<div class="page-columns page-full"><p>Kane arranges his list into seven “alternative explanations” for null results, which we might think of as “potential power leakages.” I recreated a version of Kane’s table (Table 1 in his paper) that contains each action item to consider. I’ve kept Kane’s labeling for the various categories, but taken some liberties in collapsing some of the action items.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;He breaks his suggestions into to columns for the current study and future studies. For my purposes, these can be collapsed.</p></li></div></div>
<p>The table below lists all of Kane’s categories and action items and notes the pathway through which this stop might increase statistical power. While Kane doesn’t explicitly pitch the list as “ways to increase” power, we can certainly borrow it for that purpose.</p>
<div class="column-page">
<table class="table">
<thead>
<tr class="header">
<th>Kane’s Categories</th>
<th>Action Item</th>
<th>Pathway to Increase Power</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>#1: Inattentiveness</strong></td>
<td>Include a measure of attention to the experimental manipulation (after the outcome measure)</td>
<td>NA</td>
</tr>
<tr class="even">
<td></td>
<td>Feature experiment relatively earlier in survey</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="odd">
<td></td>
<td>More salient treatment content</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="even">
<td></td>
<td>Consider techniques to improve respondent attentiveness</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="odd">
<td></td>
<td>Use alternative survey company</td>
<td>Increase treatment effect; see <span class="citation" data-cites="stagnaro2024">Stagnaro et al. (<a href="#ref-stagnaro2024" role="doc-biblioref">2024</a>)</span> for more.</td>
</tr>
<tr class="even">
<td></td>
<td>Increased (pre-treatment) screening-out of inattentive respondents</td>
<td>Increase treatment effect, though a smaller sample size will increase the standard error.</td>
</tr>
<tr class="odd">
<td><strong>#2: Failure to vary the independent variable</strong></td>
<td>Include a manipulation check after the outcome measure</td>
<td>NA</td>
</tr>
<tr class="even">
<td></td>
<td>Make treatment content more salient (e.g., appear sooner and/or more frequently)</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="odd">
<td></td>
<td>Make treatment stronger (e.g., more direct, forceful language)</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="even">
<td><strong>#3: Pre-treatment effect</strong></td>
<td>Include a measure to gauge how pre-treated a respondent might be (implemented prior to random assignment)</td>
<td>NA</td>
</tr>
<tr class="odd">
<td></td>
<td>Make treatment stronger (assuming no ceiling/floor effect)</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="even">
<td></td>
<td>Postpone the study until treatment has lower salience in the real world</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="odd">
<td></td>
<td>Investigate using a non-experimental design</td>
<td>NA</td>
</tr>
<tr class="even">
<td><strong>#4: Statistical power</strong></td>
<td>Conduct power analyses to determine necessary n size (assuming smallest meaningful effect size)</td>
<td>Decrease standard error; see <span class="citation" data-cites="bloom1995">Bloom (<a href="#ref-bloom1995" role="doc-biblioref">1995</a>)</span> and <a href="https://osf.io/preprints/osf/5am9q_v2">this preprint</a> for more.</td>
</tr>
<tr class="odd">
<td></td>
<td>Choose sample size cognizant of number of conditions, subgroup analyses, and likely inattentiveness</td>
<td>Decrease standard error; see <span class="citation" data-cites="bloom1995">Bloom (<a href="#ref-bloom1995" role="doc-biblioref">1995</a>)</span> and <a href="https://osf.io/preprints/osf/5am9q_v2">this preprint</a> for more.</td>
</tr>
<tr class="even">
<td></td>
<td>Use pre-registered covariates in model, blocking, or a within-subjects design</td>
<td>Decrease standard error; see <span class="citation" data-cites="blair2019">Blair et al. (<a href="#ref-blair2019" role="doc-biblioref">2019</a>)</span> and <span class="citation" data-cites="blair2023">Blair, Coppock, and Humphreys (<a href="#ref-blair2023" role="doc-biblioref">2023</a>)</span> for a framework to assess the impact of these design choices; ; see <span class="citation" data-cites="clifford2021">Clifford, Sheagley, and Piston (<a href="#ref-clifford2021" role="doc-biblioref">2021</a>)</span> for a good approach using a pre-post design.</td>
</tr>
<tr class="odd">
<td></td>
<td>Aim to collect a larger sample</td>
<td>Decrease standard error.</td>
</tr>
<tr class="even">
<td></td>
<td>Choose sample size cognizant of quantities learned from first study: effect size, SD of Y, level of inattentiveness, and number/size of subgroup analyses</td>
<td>Decrease standard error; this <a href="https://osf.io/preprints/osf/5am9q_v2">this preprint</a> presents some ideas about how to connect power analysis to existing studies.</td>
</tr>
<tr class="odd">
<td></td>
<td>Consider an alternative design structure (e.g., within-subjects)</td>
<td>Decrease standard error.</td>
</tr>
<tr class="even">
<td><strong>#5: Poor measurement of the dependent variable</strong></td>
<td>Check Y’s criterion validity</td>
<td>Decrease standard error; perhaps also increase treatment effect.</td>
</tr>
<tr class="odd">
<td></td>
<td>If possible, use existing (validated) measures of Y</td>
<td>Decrease standard error; perhaps also increase treatment effect.</td>
</tr>
<tr class="even">
<td></td>
<td>Use an alternative and/or multiple measures of Y to reduce measurement error</td>
<td>Decrease standard error; perhaps also increase treatment effect.</td>
</tr>
<tr class="odd">
<td><strong>#6: Ceiling/Floor effect</strong></td>
<td>Use measure of Y that is unlikely to have an extremely high/low mean (e.g., scales with more extreme end-points or multi-item scales)</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="even">
<td></td>
<td>Assuming population of interest remains the same, use a measure of Y with a more (conceptually) extreme range</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="odd">
<td></td>
<td>Consider postponing study if ceiling/floor is due to current context</td>
<td>Increase treatment effect.</td>
</tr>
<tr class="even">
<td><strong>#7: Countervailing treatment effects</strong></td>
<td>Include a pre-treatment measure of the moderating variable, across which countervailing effects might occur</td>
<td>Increase treatment effect (by changing definition slightly); this will increase the standard error.</td>
</tr>
<tr class="odd">
<td></td>
<td>Pre-register a hypothesized interaction between treatment and moderator</td>
<td>Increase treatment effect (by changing definition slightly); this will increase the standard error.</td>
</tr>
<tr class="even">
<td></td>
<td>Include best possible (pre-treatment) measure(s) of moderating variable to improve precision</td>
<td>Decrease standard error.</td>
</tr>
</tbody>
</table>
</div>
<p>And for completeness, here is Kane’s original table:</p>
<p><img src="images/clipboard-1273155981.png" class="img-fluid"></p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-arel-bundock2022" class="csl-entry" role="listitem">
Arel-Bundock, Vincent, Ryan C Briggs, Hristos Doucouliagos, Marco Mendoza Aviña, and T. D. Stanley. 2022. <span>“Quantitative Political Science Research Is Greatly Underpowered.”</span> <a href="http://dx.doi.org/10.31219/osf.io/7vy2f">http://dx.doi.org/10.31219/osf.io/7vy2f</a>.
</div>
<div id="ref-blair2019" class="csl-entry" role="listitem">
Blair, Graeme, Jasper Cooper, Alexander Coppock, and Macartan Humphreys. 2019. <span>“Declaring and Diagnosing Research Designs.”</span> <em>American Political Science Review</em> 113 (3): 838–59. <a href="https://doi.org/10.1017/s0003055419000194">https://doi.org/10.1017/s0003055419000194</a>.
</div>
<div id="ref-blair2023" class="csl-entry" role="listitem">
Blair, Graeme, Alexander Coppock, and Macartan Humphreys. 2023. <em>Research Design in the Social Sciences</em>. Princeton, NJ: Princeton University Press.
</div>
<div id="ref-bloom1995" class="csl-entry" role="listitem">
Bloom, Howard S. 1995. <span>“Minimum Detectable Effects.”</span> <em>Evaluation Review</em> 19 (5): 547–56. <a href="https://doi.org/10.1177/0193841x9501900504">https://doi.org/10.1177/0193841x9501900504</a>.
</div>
<div id="ref-clifford2021" class="csl-entry" role="listitem">
Clifford, Scott, Sheagley Geoffrey, and Spencer Piston. 2021. <span>“Increasing Precision Without Altering Treatment Effects: Repeated Measures Designs in Survey Experiments.”</span> <em>American Political Science Review</em> 115 (3): 1048–65. <a href="https://doi.org/10.1017/s0003055421000241">https://doi.org/10.1017/s0003055421000241</a>.
</div>
<div id="ref-kane2025" class="csl-entry" role="listitem">
Kane, John V. 2025. <span>“More Than Meets the ITT: A Guide for Anticipating and Investigating Nonsignificant Results in Survey Experiments.”</span> <em>Journal of Experimental Political Science</em> 12 (1): 110–25. <a href="https://doi.org/10.1017/xps.2024.1">https://doi.org/10.1017/xps.2024.1</a>.
</div>
<div id="ref-stagnaro2024" class="csl-entry" role="listitem">
Stagnaro, Michael N, James Druckman, Adam J Berinsky, Antonio A Arechar, Robb Willer, and David G Rand. 2024. <span>“Representativeness Versus Response Quality: Assessing Nine Opt-in Online Survey Samples.”</span> PsyArXiv. <a href="https://doi.org/10.31234/osf.io/h9j2d">https://doi.org/10.31234/osf.io/h9j2d</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>